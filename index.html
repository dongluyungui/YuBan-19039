<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>御坂19039の温馨小站</title>
  <link rel="stylesheet" href="styles.css">
  <style>
       /* 新增动态样式 */ 
    .dynamic-list { 
        margin-top: 20px; 
    } 
 
    .dynamic-item { 
        background: #fff; 
        border-radius: 10px; 
        padding: 15px; 
        margin-bottom: 15px; 
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); 
    } 
 
    .dynamic-time { 
        color: #666; 
        font-size: 0.9em; 
        margin-bottom: 8px; 
    } 
 
    .dynamic-content { 
        line-height: 1.6; 
    } 
    /* 首页专属样式 */
    .banner {
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .profile-card {
      background: white;
      display: flex;
      align-items: center;
      padding: 30px;
      margin: 20px 0;
    }

    .avatar {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      margin-right: 30px;
      border: 5px solid var(--secondary-color);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .stat-number {
      color: var(--primary-color);
      font-size: 2.5em;
      font-weight: bold;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div>
        <a href="index.html" class="nav-link">首页</a>
        <a href="About.html" class="nav-link">关于</a>
        <a href="Sound.html" class="nav-link active">语音按钮</a>
        <a href="LiveHistory.html" class="nav-link">往期回放</a>
      </div>
      <div>
        <a href="https://space.bilibili.com/12136555" target="_blank" class="bilibili-btn">个人主页</a>
        <a href="https://live.bilibili.com/8414339" target="_blank" class="bilibili-btn">进入直播间</a>
      </div>
    </div>
  </header>

    <div class="container">
        <div class="banner">
            <h1>⚡御坂19039の温馨小站⚡</h1>
            <p>欢迎来到御坂19039的应援基地！(≧∇≦)ﾉ</p>
        </div>

        <div class="profile-card">
            <img src="img/face.jpg" 
                 alt="御坂19039" 
                 class="avatar">
            <div>
                <h2 style="color: #e91e63; margin-top: 0;">✨ 主播介绍 ✨</h2>
                <p>🎤 B站ID：御坂19039</p>
                <p>🌟 直播类型：聊天互动 | 游戏实况 | 才艺展示</p>
                <p>💖 直播时间：不定期直播哦~时间变动会发动态嘟</p>
                <p>📌 个人标签：元气满满 | 超电磁炮 | 治愈系</p>
                <div style="margin-top: 20px;">
                    <a href="https://space.bilibili.com/12136555/" target="_blank" class="bilibili-btn">个人主页</a>
                    <a href="https://live.bilibili.com/8414339/" target="_blank" class="bilibili-btn">直播间</a>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>粉丝数量</h3>
                <div class="stat-number loading" id="fans-count"></div>
                <p>持续增长中...</p>
            </div>
            <div class="stat-card">
                <h3>直播间人气</h3>
                <div class="stat-number loading" id="live-popularity"></div>
                <p id="live-status">当前直播状态</p>
            </div>
            <div class="stat-card">
                <h3>获赞总数</h3>
                <div class="stat-number loading" id="likes-count"></div>
                <p>感谢大家的支持</p>
            </div>
        </div>

        <!-- 直播特色 -->
        <div class="live-card">
            <h3>🌟 直播特色 🌟</h3>
            <ul>
                <li>💬 实时互动：弹幕及时回复，点歌点梗都可以！</li>
                <li>🎮 多元内容：从热门游戏到经典怀旧全涵盖</li>
                <li>🎉 定期活动：生日会、纪念回、节庆特别企划</li>
                <li>🎁 粉丝福利：定期抽奖、定制周边</li>
            </ul>
        </div>

       <!-- 最新动态 --> 
      <div class="live-card"> 
        <h3>📢 最新动态</h3> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 


 <div id="dynamics-container" class="dynamic-list">
    <div class="dynamic-item">
      <div class="dynamic-time">📅 01月30日</div>
      <div class="dynamic-time">投稿视频</div>
      <div class="dynamic-content">新年快乐呀～</div><div class="dynamic-content"><a href="https:www.bilibili.com/video/BV1EYFVeZEMJ/" target="_blank">咱们农村娃儿过年是这样的</a></div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 01月28日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">春节到，鸿运照，烦恼的事儿往边靠，祝你出门遇贵人，在家听喜报！年年有此时，岁岁有今朝！愿你和你的家人幸福快乐！万事如意！每天都要开开心心的哦！</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年12月23日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">不要笑挑战的搞笑视频征集啦～可以直接在这条动态下分享bv号，也可以直接分享视频给我～届时会开启只要笑就吃柠檬挑战！欢迎大家多多分享！搞笑视频尽量在10-15秒左右，不宜过长哦～</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年12月21日</div>
      <div class="dynamic-time">投稿视频</div>
      <div class="dynamic-content">呜呜呜呜我以前没玩过恐怖游戏不敢玩第一次玩轻喷好嘛QAQ</div><div class="dynamic-content"><a href="https:www.bilibili.com/video/BV14BkUY8EK4/" target="_blank">小小梦魇，拿下！（乱叫版）</a></div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年12月17日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">因为26号就考专业期末了所以这两周跟大家请个假抱个佛脚哦😭考期末的大家也要加油哦！！！😭29号见～</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年12月13日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">勿忘国耻！吾辈自强！时代在进步，但我们永远不能忘记这段历史！</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年12月05日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">谁家好人没有收到期末报曲目的通知现在找处找人问啊😭整个大三专升本就我一个是民乐的，为了收集信息现在在教学楼两头跑喵，真的不知道什么时候考试啊😭我要哭了</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年11月05日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">那啥，跑步之前记得先把鞋带系好再跑，或者想体验一下与大地亲吻QAQ</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年11月01日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">内个（颤抖）不给糖就捣蛋QAQ（颤抖）呃呃呃呃呃呃QAQ
  其实也不是不敢玩恐怖游戏吧也不是怕就是电脑没内存了不太好玩，啊对就是容易卡，对对对QAQ

    万圣恐怖夜！
               《小小梦魇》启动！
                    （我尽力了QAQ）

              11.2日零时！来看sina害怕！</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年10月31日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">呃呃呃吹笙吹红温了然后给自己手来了一口😭不是这乐器怎么越拿越重哇😭</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年10月26日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">直播间可以使用表情包啦！目前的所有表情都是免费使用（在直播间内）
  今天打算早点啵啵，玩mc好呢？还是星露谷好呢～？</div>
    </div>
    <div class="dynamic-item">
      <div class="dynamic-time">📅 2024年10月25日</div>
      <div class="dynamic-time">文字动态</div>
      <div class="dynamic-content">丸辣，我忘记画舰礼了😭</div>
    </div></div>

       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
       <!-- 添加动态 --> 
      </div> 

    <!-- 页脚 -->
    <div style="text-align: center; padding: 30px; color: #666;">
        <p>© 2024 御坂19039 应援站 | 粉丝群：769271000</p>
        <p>本站为粉丝自制，与哔哩哔哩官方无关</p>
    </div>

    </div>

    <script>
        // 配置信息
        const CONFIG = {
            UID: 12136555,
            ROOM_ID: 8414339,
            CORS_PROXY: 'https://api.allorigins.win/get?url=', // 备用代理
            REFRESH_INTERVAL: 300000 // 5分钟刷新
        };

        // 元素引用
        const elements = {
            fans: document.getElementById('fans-count'),
            popularity: document.getElementById('live-popularity'),
            likes: document.getElementById('likes-count'),
            liveStatus: document.getElementById('live-status')
        };

        // 通用请求方法
        async function fetchData(url) {
            try {
                const response = await fetch(`${CONFIG.CORS_PROXY}${encodeURIComponent(url)}`);
                if (!response.ok) throw new Error('网络请求失败');
                
                const data = await response.json();
                return JSON.parse(data.contents);
            } catch (error) {
                console.error('数据获取失败:', error);
                return null;
            }
        }

        // 更新统计数据
        function updateStat(element, value, suffix = '') {
            element.classList.remove('loading');
            if (value === null) {
                element.textContent = '数据暂不可用';
                element.style.color = '#999';
            } else {
                element.textContent = `${(value / 10000).toFixed(1)}万${suffix}`;
                element.style.color = '#e91e63';
            }
        }

        // 加载所有数据
        async function loadAllData() {
            // 粉丝数据
            const fansData = await fetchData(
                `https://api.bilibili.com/x/relation/stat?vmid=${CONFIG.UID}`
            );
            updateStat(elements.fans, fansData?.data?.follower);

            // 直播间数据
            const liveData = await fetchData(
                `https://api.live.bilibili.com/room/v1/Room/get_info?room_id=${CONFIG.ROOM_ID}`
            );
            updateStat(elements.popularity, liveData?.data?.online);
            elements.liveStatus.textContent = liveData?.data?.live_status === 1 
                ? '🔴 正在直播中' 
                : '⚪️ 当前未开播';

            // 点赞数据
            const upstatData = await fetchData(
                `https://api.bilibili.com/x/space/upstat?mid=${CONFIG.UID}`
            );
            updateStat(elements.likes, upstatData?.data?.likes);
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            loadAllData();
            setInterval(loadAllData, CONFIG.REFRESH_INTERVAL);
        });

        // 错误处理
        window.addEventListener('error', (event) => {
            console.error('全局错误:', event.error);
            [elements.fans, elements.popularity, elements.likes].forEach(el => {
                el.textContent = '数据获取失败';
                el.style.color = '#ff0000';
            });
        });
    </script>
</body>
</html>
