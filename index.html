<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¾¡å‚19039ã®æ¸©é¦¨å°ç«™</title>
  <link rel="stylesheet" href="css/greeting.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/menu.css">
  <link rel="stylesheet" href="css/pages.css">
  <link rel="stylesheet" href="css/captain.css">
  <link rel="stylesheet" href="css/head.css">
  <link rel="stylesheet" href="./css/setting.css"/>
  <script src = "./js/setting.js"></script>
  <link rel="stylesheet" href="./css/responsive-nav.css"/>
  <script src = "./js/responsive-nav.js"></script>
  <script src="js/pages.js"></script>  <link rel="icon" href="img/favicon.ico" type="image/x-icon">
  <style>
    /* æ–°å¢åŠ¨æ€æ ·å¼ */
    .dynamic-list {
      margin-top: 20px;
    }

    .index-item,
    .dynamic-item {
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .index-item:hover,
    .dynamic-item:hover {
      transform: translateY(-5px); /* ä¸Šæµ®æ•ˆæœ */
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* é˜´å½±åŠ æ·±æ•ˆæœ */
      /*cursor: pointer;  é¼ æ ‡æ‚¬åœæ—¶æŒ‡é’ˆå˜ä¸ºæ‰‹å‹ */
    }
    
    .dynamic-style,
    .dynamic-time {
      color: #666;
      font-size: 0.9em;
      margin-bottom: 8px;
    }

    .dynamic-content {
      line-height: 1.6;
    }

    /* é¦–é¡µä¸“å±æ ·å¼ */
    .banner {
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .profile-card {
      background: white;
      display: flex;
      align-items: center;
      padding: 30px;
      margin: 20px 0;
      position: relative;
      /* æ–°è®©å­å…ƒç´ ç»å¯¹å®šä½ç›¸å¯¹äºæ­¤å…ƒç´  */
    }

    /* å®šä¹‰ times ç±»çš„åŸºæœ¬æ ·å¼ */
    .times {
        margin-left: auto;
    }

    .avatar {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      margin-right: 30px;
      border: 5px solid var(--secondary-color);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .stat-card {
      background-color: white;
      /* å¡ç‰‡èƒŒæ™¯é¢œè‰²ä¸ºç™½è‰² */
      border-radius: 10px;
      /* å¡ç‰‡åœ†è§’ */
      padding: 15px;
      /* å¡ç‰‡å†…è¾¹è· */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* å¡ç‰‡é˜´å½±æ•ˆæœ */
      text-align: center;
      /* å¡ç‰‡å†…æ–‡æœ¬å±…ä¸­æ˜¾ç¤º */

    }

    .stat-number {
      color: var(--primary-color);
      font-size: 2.5em;
      font-weight: bold;
      margin: 10px 0;
    }
     /* å€’è®¡æ—¶ç»Ÿä¸€æ ·å¼ */
    .countdowns {
      background: rgba(156, 39, 176, 0.08);
      text-align: right;
      /* æ–‡å­—å³å¯¹é½ */
      padding: 12px 15px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .countdowns:hover {
      background: rgba(156, 39, 176, 0.15);
      transform: translateX(-5px);
    }

    /*æ•°æ®é¡µé¢ */
    .stat-card {
    background-color: white;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    text-align: center;
    transition: all 0.3s ease; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
}

    .stat-card:hover {
        transform: translateY(-5px); /* ä¸Šæµ®æ•ˆæœ */
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* é˜´å½±åŠ æ·±æ•ˆæœ */
        cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æŒ‡é’ˆå˜ä¸ºæ‰‹å‹ */
    }

        /* åª’ä½“æŸ¥è¯¢ï¼Œå½“å±å¹•å®½åº¦å°äºç­‰äº 768px æ—¶åº”ç”¨ä»¥ä¸‹æ ·å¼ */
    @media (max-width: 768px) {
        .profile-card {
            /* ç¼©å°å†…è¾¹è· */
            padding: 10px;
            /* ç¼©å°ä¸Šä¸‹å¤–è¾¹è· */
            margin: 10px 0;
            /* è°ƒæ•´ä¸ºå‚ç›´å¸ƒå±€ï¼Œåœ¨ç§»åŠ¨ç«¯æ›´åˆé€‚ */
            flex-direction: column;
            /* è®©å­å…ƒç´ æ°´å¹³å±…ä¸­ */
            align-items: center;
        }
        /* å€’è®¡æ—¶ */
        .times {
             margin-left: auto;
             margin-right: auto;
        }
        /* å€’è®¡æ—¶ç»Ÿä¸€æ ·å¼ */
        .countdowns {
          text-align: center;
          font-size: 15px;
        }
    }
  </style>
</head>

<body>
  <!--é—®å€™è¯­å¼€å§‹-->
  <div id="greetingBox"></div><!--é—®å€™è¯­æ˜¾ç¤ºå®¹å™¨-->
  <div id="fireworks-container"></div>
    <!-- å³é”®èœå• -->
    <ul id="context-menu">
        <li>å½©è›‹</li>
        <li>æ›´æ–°åŠ¨æ€</li>
    </ul>
  <header class="header">
    <div class="header-content">
          <div> 
                <a href="index.html" class="nav-link" data-i18n="home">é¦–é¡µ</a>
                <a href="About.html" class="nav-link" data-i18n="about">å…³äº</a>
                <a href="gallery.html" class="nav-link active" data-i18n="gallery">ç”»å»Š</a>
                <a href="time.html" class="nav-link active" data-i18n="timeline">æ—¶é—´è½´</a>
                
                <!-- éœ€è¦åœ¨PCç«¯"æ›´å¤š"ä¸­æ˜¾ç¤ºçš„é“¾æ¥ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼Œè¶…å‡ºæ—¶éšè—ï¼‰ -->
                
                <!-- éœ€è¦åœ¨ç§»åŠ¨ç«¯"æ›´å¤š"ä¸­æ˜¾ç¤ºçš„é“¾æ¥ï¼ˆPCç«¯æ­£å¸¸æ˜¾ç¤ºï¼Œç§»åŠ¨ç«¯éšè—ï¼‰ -->
                <a href="comment.html" class="nav-link active hidden-on-mobile" data-i18n="comment_board">ç•™è¨€æ¿</a>
                <a href="Sound.html" class="nav-link active hidden-on-mobile" data-i18n="voice_button">è¯­éŸ³æŒ‰é’®</a>
                <a href="LiveHistory.html" class="nav-link active hidden-on-mobile" data-i18n="previous_replays">å¾€æœŸå›æ”¾</a>
                <a href="games.html" class="nav-link active hidden-on-mobile" data-i18n="games">å°æ¸¸æˆ</a>
                
                <!-- è®¾ç½®æŒ‰é’® -->
                <button id="settingBtn" class="nav-link" data-no-meow data-i18n="Webpage_settings">ç½‘é¡µè®¾ç½®</button>
                <div id="settingOverlay" class="setting-overlay"></div>
                <div id="settingPanel" class="setting-panel"></div>
                
                <!-- 1. PCç«¯ä¸“ç”¨"æ›´å¤š"å®¹å™¨ -->
                <div class="more-container more-container-pc" style="display: none;">
                    <button class="more-btn more-btn-pc nav-link" data-i18n="more">æ›´å¤š â–¼</button>
                    <div class="more-dropdown more-dropdown-pc">
                    <!-- PCç«¯"æ›´å¤š"èœå•å†…å®¹ -->
                    </div>
                </div>
                
                <!-- 2. ç§»åŠ¨ç«¯ä¸“ç”¨"æ›´å¤š"å®¹å™¨ -->
                <div class="more-container more-container-mobile">
                    <button class="more-btn more-btn-mobile nav-link" data-i18n="more">æ›´å¤š â–¼</button>
                    <div class="more-dropdown more-dropdown-mobile">
                    <!-- ç§»åŠ¨ç«¯"æ›´å¤š"èœå•å†…å®¹ï¼ˆæ¯”PCç«¯å¤šï¼‰ -->
                    <a href="comment.html" class="nav-link active" data-i18n="comment_board">ç•™è¨€æ¿</a>
                    <a href="Sound.html" class="nav-link active" data-i18n="voice_button">è¯­éŸ³æŒ‰é’®</a>
                    <a href="LiveHistory.html" class="nav-link active" data-i18n="previous_replays">å¾€æœŸå›æ”¾</a>
                    <a href="games.html" class="nav-link active" data-i18n="games">å°æ¸¸æˆ</a>
                    </div>
                </div>
            </div>  
      </div>
  </header>

  <div class="container">
    <div class="banner">
      <h1>âš¡å¾¡å‚19039ã®æ¸©é¦¨å°ç«™âš¡</h1>
      <p>æ¬¢è¿æ¥åˆ°å¾¡å‚19039çš„åº”æ´åŸºåœ°ï¼(â‰§âˆ‡â‰¦)ï¾‰</p>
    </div>

    <!-- èµ„æ–™å¡ç‰‡ -->
    <div class="profile-card">
      <!-- å¤´åƒé€‰æ‹©åŒºåŸŸ -->
      <div class="avatar-selector">
        <div class="avatar-container active">
          <img src="img/face.jpg" alt="å¾¡å‚19039" class="main-avatar">
          <div class="avatar-label">å¾¡å‚19039</div>
        </div>
        <div class="avatar-container">
          <img src="img/face.jpg" alt="SINA" class="main-avatar">
          <div class="avatar-label">SINA</div>
        </div>
        <div class="avatar-container">
          <img src="img/face.jpg" alt="çƒ–æ™" class="main-avatar">
          <div class="avatar-label">çƒ–æ™</div>
        </div>
      </div>
      
      <!-- è§’è‰²ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸ -->
      <div class="character-info">
        <h2>âœ¨ ä¸»æ’­ä»‹ç» âœ¨</h2>
        <div id="character-details">
          <p >Bç«™IDï¼šå¾¡å‚19039</p>
          <p>ç”Ÿæ—¥ï¼š5æœˆ01æ—¥</p>
          <p>å‡ºé“æ—¥æœŸï¼š2024å¹´5æœˆ31æ—¥</p>
          <p>ç›´æ’­ç±»å‹ï¼šèŠå¤©äº’åŠ¨ | æ¸¸æˆå®å†µ | æ‰è‰ºå±•ç¤º</p>
          <p>ç›´æ’­æ—¶é—´ï¼šä¸å®šæœŸç›´æ’­å“¦~æ—¶é—´å˜åŠ¨ä¼šå‘åŠ¨æ€å˜Ÿ</p>
          <p>ä¸ªäººæ ‡ç­¾ï¼šä½ å·²ç»ä¸Šè´¼èˆ¹äº†ï¼Œä½ é€ƒä¸è„±äº†æ¡€æ¡€æ¡€ï¼</p>
          <div style="margin-top: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
            <a href="https://space.bilibili.com/12136555/" target="_blank" class="bilibili-btn">
              ä¸ªäººä¸»é¡µ
            </a>
            <a href="https://live.bilibili.com/8414339/" target="_blank" class="bilibili-btn">
              ç›´æ’­é—´
            </a>
          </div>
        </div>
      </div>


      <div class="times">
        <div id="countdown" class="countdowns">ç”Ÿæ—¥å€’è®¡æ—¶ï¼šåŠ è½½ä¸­...</div>
        <div id="anniversary-countdown" class="countdowns">å‘¨å¹´å€’è®¡æ—¶ï¼šåŠ è½½ä¸­...</div>
        <!-- æ–°å¢å…ƒç´ ï¼Œç”¨äºæ˜¾ç¤ºå·²å‡ºé“æ—¶é—´ -->
        <div id="debut-time" class="countdowns">å·²å‡ºé“ï¼šåŠ è½½ä¸­...</div>
        <!-- æ–°å¢å…ƒç´ ï¼Œç”¨äºæ˜¾ç¤ºè·ç¦»ä¸€ä¸‡ç²‰ä¸çš„å·®å€¼ -->
        <div id="fans-difference" class="countdowns">è·ç¦»ä¸€ä¸‡ç²‰ä¸è¿˜å·®ï¼šåŠ è½½ä¸­...</div>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <h3>ç²‰ä¸æ•°é‡</h3>
        <div class="stat-number loading" id="fans-count"></div>
        <p>æŒç»­å¢é•¿ä¸­...</p>
      </div>
      <div class="stat-card">
        <h3>ç›´æ’­é—´äººæ°”</h3>
        <div class="stat-number loading" id="live-popularity"></div>
        <p id="live-status">å½“å‰ç›´æ’­çŠ¶æ€</p>
      </div>
      <!-- æ–°å¢èˆ°é•¿ç»Ÿè®¡å¡ç‰‡ -->
      <div class="stat-card" id="captain-count">
        <h3>èˆ°é•¿æ•°é‡</h3>
        <div class="stat-number loading" id="captain-number"></div>
        <p>æ„Ÿè°¢èˆ°é•¿ä»¬çš„æ”¯æŒï¼</p>
      </div>
    </div>

    <h1>èˆ°é•¿åˆ—è¡¨</h1>
    <div id="captain-list"></div>

    <!-- ç›´æ’­ç‰¹è‰² -->
    <div class="live-card">
      <h3>ğŸŒŸ ç›´æ’­ç‰¹è‰² ğŸŒŸ</h3>
      <div class="index-item">
        <ul>
          <li>ğŸ’¬ å®æ—¶äº’åŠ¨ï¼šå¼¹å¹•åŠæ—¶å›å¤ï¼Œç‚¹æ­Œç‚¹æ¢—éƒ½å¯ä»¥ï¼</li>
          <li>ğŸ® å¤šå…ƒå†…å®¹ï¼šä»çƒ­é—¨æ¸¸æˆåˆ°ç»å…¸æ€€æ—§å…¨æ¶µç›–</li>
          <li>ğŸ‰ å®šæœŸæ´»åŠ¨ï¼šç”Ÿæ—¥ä¼šã€çºªå¿µå›ã€èŠ‚åº†ç‰¹åˆ«ä¼åˆ’</li>
          <li>ğŸ ç²‰ä¸ç¦åˆ©ï¼šå®šæœŸæŠ½å¥–ã€å®šåˆ¶å‘¨è¾¹</li>
        </ul>
      </div>
    </div>

    <!-- æœ€æ–°åŠ¨æ€ -->
    <div class="live-card">
      <h3>ğŸ“¢ æœ€æ–°åŠ¨æ€</h3>
      <div id="dynamics-container" class="dynamic-list"></div>
    </div>

    <div class="pagination-container">
            <div class="page-info">å…±<span id="total-count">0</span>æ¡åŠ¨æ€ï¼Œå½“å‰ç¬¬<span id="current-page">1</span>é¡µ/å…±<span id="total-pages">1</span>é¡µ</div>
            <div class="page-buttons" id="page-buttons"></div>
            <div class="jump-to">
                è·³è½¬åˆ°ç¬¬<input type="number" id="jump-page" min="1">é¡µ
                <button onclick="jumpToPage()">è·³è½¬</button>
            </div>
        </div>
    <!-- é¡µè„š -->
    <div style="text-align: center; padding: 30px; color: #666;">
      <p>Â© 2024 å¾¡å‚19039 åº”æ´ç«™ | ç²‰ä¸ç¾¤ï¼š769271000</p>
      <p>æœ¬ç«™ä¸ºç²‰ä¸è‡ªåˆ¶ï¼Œä¸å“”å“©å“”å“©å®˜æ–¹æ— å…³</p>
      <p id="running-time">åŠ è½½ä¸­...</p>
    </div>

  </div>

  <script>
     // é…ç½®ä¿¡æ¯
    const CONFIG = {
        UID: 12136555,
        ROOM_ID: 8414339,
        CORS_PROXY: 'https://api.allorigins.win/get?url=', // å¤‡ç”¨ä»£ç†
        IMG_PROXY: 'https://images.weserv.nl/?url=',
        REFRESH_INTERVAL: 300000, // 5åˆ†é’Ÿåˆ·æ–°
        PAGE_SIZE: 10
    };
    // æ–°å¢å…¨å±€å˜é‡ï¼Œç”¨äºå­˜å‚¨èˆ°é•¿æ•°é‡
    let globalCaptainCount;
    // æ–°å¢å…¨å±€å˜é‡ï¼Œç”¨äºå­˜å‚¨ç›´æ’­é—´äººæ°”æ•°æ®
    let globalLivePopularity;
    // æ–°å¢å…¨å±€å˜é‡ï¼Œç”¨äºå­˜å‚¨ç²‰ä¸æ•°é‡
    let globalFollowerCount;

    // å…ƒç´ å¼•ç”¨
    const elements = {
        fans: document.getElementById('fans-count'),
        popularity: document.getElementById('live-popularity'),
        liveStatus: document.getElementById('live-status'),
        fansDifference: document.getElementById('fans-difference'),
        debutTime: document.getElementById('debut-time'),
        captain: document.getElementById('captain-number'),
        fansCard: document.querySelector('.stat-card:nth-child(1)'), // ç²‰ä¸æ•°é‡å¡ç‰‡
        captainCard: document.querySelector('.stat-card:nth-child(3)'), // èˆ°é•¿æ•°é‡å¡ç‰‡
        popularityCard: document.querySelector('.stat-card:nth-child(2)') // ç›´æ’­é—´äººæ°”å¡ç‰‡
    };

    // é€šç”¨è¯·æ±‚æ–¹æ³•
    async function fetchData(url) {
      try {
        const response = await fetch(`${CONFIG.CORS_PROXY}${encodeURIComponent(url)}`);
        if (!response.ok) throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');

        const data = await response.json();
        return JSON.parse(data.contents);
      } catch (error) {
        console.error('æ•°æ®è·å–å¤±è´¥:', error);
        return null;
      }
    }

    // æ›´æ–°ç»Ÿè®¡æ•°æ®
    function updateStat(element, value, suffix = '') {
      element.classList.remove('loading');
      if (value === null) {
        element.textContent = 'æ•°æ®æš‚ä¸å¯ç”¨';
        element.style.color = '#999';
      } else {
        let displayValue;
        if (value >= 10000) {
          displayValue = `${(value / 10000).toFixed(1)}ä¸‡${suffix}`;
        } else {
          displayValue = `${value}${suffix}`;
        }
        element.textContent = displayValue;
        element.style.color = '#e91e63';
      }
    }

    // åŠ è½½æ‰€æœ‰æ•°æ®
    async function loadAllData() {
        // ç²‰ä¸æ•°æ®
        const fansData = await fetchData(
            `https://api.bilibili.com/x/relation/stat?vmid=${CONFIG.UID}`
        );
        const followerCount = fansData?.data?.follower;
        // å°†è·å–åˆ°çš„ç²‰ä¸æ•°é‡ä¿å­˜åˆ°å…¨å±€å˜é‡ä¸­
        globalFollowerCount = followerCount;
        updateStat(elements.fans, followerCount);

        // è®¡ç®—è·ç¦»ç²‰ä¸çš„å·®å€¼
        if (followerCount!== null) {
            const difference = 2000 - followerCount;
            if (difference > 0) {
                elements.fansDifference.textContent = `è·ç¦»2000ç²‰ä¸ä»…å·®ï¼š${difference} ä½ç²‰ä¸`;
            } else {
                elements.fansDifference.textContent = 'å·²è¾¾åˆ°2000ç²‰ä¸ï¼';
            }
        } else {
            elements.fansDifference.textContent = 'æ•°æ®æš‚ä¸å¯ç”¨';
        }

        // ç›´æ’­é—´æ•°æ®
        const liveData = await fetchData(
            `https://api.live.bilibili.com/room/v1/Room/get_info?room_id=${CONFIG.ROOM_ID}`
        );
        const online = liveData?.data?.online;
        // å°†è·å–åˆ°çš„ç›´æ’­é—´äººæ°”æ•°æ®ä¿å­˜åˆ°å…¨å±€å˜é‡ä¸­
        globalLivePopularity = online;
        updateStat(elements.popularity, online);
        elements.liveStatus.textContent = liveData?.data?.live_status === 1
          ? 'ğŸ”´ æ­£åœ¨ç›´æ’­ä¸­'
          : 'âšªï¸ å½“å‰æœªå¼€æ’­';

        // èˆ°é•¿æ•°æ®
        const captainData = await fetchData(
            `https://api.live.bilibili.com/xlive/app-room/v2/guardTab/topList?roomid=${CONFIG.ROOM_ID}&page=1&ruid=${CONFIG.UID}&page_size=${CONFIG.PAGE_SIZE}`
        );
        const captainCount = captainData?.data?.info?.num || null;
        // å°†è·å–åˆ°çš„èˆ°é•¿æ•°é‡ä¿å­˜åˆ°å…¨å±€å˜é‡ä¸­
        globalCaptainCount = captainCount;
        updateStat(elements.captain, captainCount);
    }

    // æ–°å¢å€’è®¡æ—¶åŠŸèƒ½
    function updateCountdown() {
        const now = new Date();
        const currentYear = now.getFullYear();
        // å‡ºé“å¹´ä»½
        const debutYear = 2024;

        // å¯ä»¥ä¿®æ”¹ä¸‹é¢è¿™ä¸€è¡Œæ¥æ”¹å˜ç›®æ ‡æ—¥æœŸï¼Œè¿™é‡Œè®¾ç½®ä¸ºæ¯å¹´çš„5æœˆ1æ—¥
        let targetYear = currentYear;
        const targetDate = new Date(targetYear, 4, 1); // æ³¨æ„ï¼šæœˆä»½æ˜¯ä»0å¼€å§‹è®¡æ•°ï¼Œ4ä»£è¡¨5æœˆ
        if (now > targetDate) {
            targetYear++;
            targetDate.setFullYear(targetYear);
        }
        const timeDiff = targetDate - now;

        const isBirthday = now.getMonth() === 4 && now.getDate() === 1;
        const countdownElement = document.getElementById('countdown');

        if (isBirthday) {
            countdownElement.textContent = 'ğŸ‰ä»Šå¤©æ˜¯ä¸»æ’­çš„ç”Ÿæ—¥ğŸ‰';
        } else if (timeDiff > 0) {
            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
            // ä¿®æ”¹æ˜¾ç¤ºæ ¼å¼ä¸º â€œç”Ÿæ—¥å›å€’è®¡æ—¶: 58å¤©:3å°æ—¶:50åˆ†:25ç§’â€
            countdownElement.textContent = `ç”Ÿæ—¥å›å€’è®¡æ—¶: ${days}å¤©:${hours}å°æ—¶:${minutes}åˆ†:${seconds}ç§’`;
        } else {
            countdownElement.textContent = 'ç”Ÿæ—¥å›å·²åˆ°ï¼';
        }

        // æ–°å¢å‘¨å¹´å€’è®¡æ—¶åŠŸèƒ½ï¼Œæ—¥æœŸæ˜¯5æœˆ31æ—¥
        let anniversaryYear = currentYear;
        const anniversaryDate = new Date(anniversaryYear, 4, 31);
        if (now > anniversaryDate) {
            anniversaryYear++;
            anniversaryDate.setFullYear(anniversaryYear);
        }
        const anniversaryTimeDiff = anniversaryDate - now;

        const isAnniversary = now.getMonth() === 4 && now.getDate() === 31;
        const anniversaryCountdownElement = document.getElementById('anniversary-countdown');

        if (isAnniversary) {
            const yearsPassed = currentYear - debutYear;
            anniversaryCountdownElement.textContent = `ä»Šå¤©æ˜¯ç¬¬${yearsPassed + 1}å‘¨å¹´`;
        } else if (anniversaryTimeDiff > 0) {
            const anniversaryDays = Math.floor(anniversaryTimeDiff / (1000 * 60 * 60 * 24));
            const anniversaryHours = Math.floor((anniversaryTimeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const anniversaryMinutes = Math.floor((anniversaryTimeDiff % (1000 * 60 * 60)) / (1000 * 60));
            const anniversarySeconds = Math.floor((anniversaryTimeDiff % (1000 * 60)) / 1000);
            anniversaryCountdownElement.textContent = `å‘¨å¹´å€’è®¡æ—¶: ${anniversaryDays}å¤©:${anniversaryHours}å°æ—¶:${anniversaryMinutes}åˆ†:${anniversarySeconds}ç§’`;
        } else {
            anniversaryCountdownElement.textContent = 'å‘¨å¹´å·²åˆ°ï¼';
        }
    }

    // è®¡ç®—å‡ºé“æ—¶é—´
    function calculateDebutTime() {
      const debutDate = new Date(2024, 4, 31); // å‡ºé“æ—¥æœŸï¼Œæ³¨æ„æœˆä»½ä»0å¼€å§‹ï¼Œ5æœˆ31æ—¥
      const now = new Date();
      const timeDiff = now - debutDate;

      const totalSeconds = Math.floor(timeDiff / 1000);
      const seconds = totalSeconds % 60;
      const totalMinutes = Math.floor(totalSeconds / 60);
      const minutes = totalMinutes % 60;
      const totalHours = Math.floor(totalMinutes / 60);
      const hours = totalHours % 24;
      const totalDays = Math.floor(totalHours / 24);
      const years = Math.floor(totalDays / 365);
      const remainingDays = totalDays % 365;

      let displayText = '';
      if (years >= 1) {
        displayText = `${years}å¹´${remainingDays}å¤©:${hours}å°æ—¶:${minutes}åˆ†:${seconds}ç§’`;
      } else {
        displayText = `${remainingDays}å¤©:${hours}å°æ—¶:${minutes}åˆ†:${seconds}ç§’`;
      }

      elements.debutTime.textContent = `å·²å‡ºé“ï¼š${displayText}`;
    }

    // åˆå§‹åŒ–å€’è®¡æ—¶
    updateCountdown();
    setInterval(updateCountdown, 1000);

    // åˆå§‹åŒ–å·²å‡ºé“æ—¶é—´æ˜¾ç¤º
    calculateDebutTime();
    setInterval(calculateDebutTime, 1000);

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
        loadAllData();
        setInterval(loadAllData, CONFIG.REFRESH_INTERVAL);    // å°†CONFIGå¯¹è±¡ä¼ é€’ç»™å‡½æ•°
    loadAndRenderCaptainData(CONFIG.ROOM_ID, CONFIG.UID, document.getElementById('captain-list'), CONFIG);
    // ç²‰ä¸æ•°é‡å¡ç‰‡ç‚¹å‡»äº‹ä»¶
elements.fansCard.addEventListener('click', () => {
    // ä½¿ç”¨å…¨å±€å˜é‡è·å–ç›®æ ‡æ•°é‡
    const targetCount = globalFollowerCount;
    const totalDuration = 1000; // åŠ¨ç”»æ€»æ—¶é•¿ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œè¿™é‡Œè®¾ç½®ä¸º1ç§’
    const startTime = Date.now();
    let currentCount = 0;

    const intervalId = setInterval(() => {
        const elapsedTime = Date.now() - startTime;
        const progress = Math.min(elapsedTime / totalDuration, 1); // ç¡®ä¿è¿›åº¦ä¸è¶…è¿‡1
        currentCount = Math.floor(targetCount * progress); // æ ¹æ®è¿›åº¦è®¡ç®—å½“å‰æ•°é‡

        let displayValue;
        if (targetCount >= 10000) {
            if (currentCount >= 10000) {
                displayValue = `${(currentCount / 10000).toFixed(1)}ä¸‡`;
            } else {
                displayValue = currentCount;
            }
        } else {
            displayValue = currentCount;
        }

        elements.fans.textContent = displayValue;

        if (elapsedTime >= totalDuration) {
            clearInterval(intervalId);
            if (targetCount >= 10000) {
                elements.fans.textContent = `${(targetCount / 10000).toFixed(1)}ä¸‡`;
            } else {
                elements.fans.textContent = targetCount;
            }
        }
    }, 10);
});

    // èˆ°é•¿æ•°é‡å¡ç‰‡ç‚¹å‡»äº‹ä»¶
    elements.captainCard.addEventListener('click', () => {
        const targetCount = parseInt(elements.captain.textContent);
        const totalDuration = 1000; // åŠ¨ç”»æ€»æ—¶é•¿ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œè¿™é‡Œè®¾ç½®ä¸º1ç§’
        const startTime = Date.now();
        let currentCount = 0;

        const intervalId = setInterval(() => {
            const elapsedTime = Date.now() - startTime;
            const progress = Math.min(elapsedTime / totalDuration, 1); // ç¡®ä¿è¿›åº¦ä¸è¶…è¿‡1
            currentCount = Math.floor(targetCount * progress); // æ ¹æ®è¿›åº¦è®¡ç®—å½“å‰æ•°é‡
            elements.captain.textContent = currentCount;

            if (elapsedTime >= totalDuration) {
                clearInterval(intervalId);
                elements.captain.textContent = targetCount;
            }
        }, 10);
    });

    // ç›´æ’­é—´äººæ°”å¡ç‰‡ç‚¹å‡»äº‹ä»¶
    elements.popularityCard.addEventListener('click', () => {
        // ä½¿ç”¨å…¨å±€å˜é‡è·å–ç›®æ ‡æ•°é‡
        const targetCount = globalLivePopularity;
        if (isNaN(targetCount)) {
            console.error('globalLivePopularity ä¸æ˜¯æœ‰æ•ˆçš„æ•°å­—');
            return;
        }
        const totalDuration = 1000; // åŠ¨ç”»æ€»æ—¶é•¿ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œè¿™é‡Œè®¾ç½®ä¸º1ç§’
        const startTime = Date.now();
        let currentCount = 0;

        const intervalId = setInterval(() => {
            const elapsedTime = Date.now() - startTime;
            const progress = Math.min(elapsedTime / totalDuration, 1); // ç¡®ä¿è¿›åº¦ä¸è¶…è¿‡1
            currentCount = Math.floor(targetCount * progress); // æ ¹æ®è¿›åº¦è®¡ç®—å½“å‰æ•°é‡

            let displayValue;
            if (targetCount >= 10000) {
                if (currentCount >= 10000) {
                    displayValue = `${(currentCount / 10000).toFixed(1)}ä¸‡`;
                } else {
                    displayValue = currentCount;
                }
            } else {
                displayValue = currentCount;
            }

            elements.popularity.textContent = displayValue;

            if (elapsedTime >= totalDuration) {
                clearInterval(intervalId);
                if (targetCount >= 10000) {
                    elements.popularity.textContent = `${(targetCount / 10000).toFixed(1)}ä¸‡`;
                } else {
                    elements.popularity.textContent = targetCount;
                }
            }
        }, 10);
    });
});

    // é”™è¯¯å¤„ç†
    window.addEventListener('error', (event) => {
      console.error('å…¨å±€é”™è¯¯:', event.error);
      [elements.fans, elements.popularity, elements.captain].forEach(el => {
        el.textContent = 'æ•°æ®è·å–å¤±è´¥';
        el.style.color = '#ff0000';
      });
    });
  </script>
  <script src="js/head.js"></script>
  <script src="js/captain.js"></script>
  <script src="js/greeting.js"></script>
  <script src="js/time.js"></script>
  <script src="js/star.js"></script>
  <script src="js/click.js"></script>
  <script src="js/fireworks.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/dynamics.js"></script>
</body>

</html>