<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>御坂19039语音按钮站</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* 新增按钮样式 */
        .category-box {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .category-title {
            color: #e91e63;
            font-size: 1.5em;
            margin: 0 0 15px 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #ff9eb5;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 10px;
        }

        .sound-btn {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--primary-color);
            font-size: 14px;
            position: relative;
            overflow: hidden;
            background: rgba(255, 158, 181, 0.2);
        }

        .sound-btn.purple-btn {
            border-color: #9c27b0;
            color: #9c27b0;
            background: #f3e5f5;
        }

        .sound-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .sound-btn:active {
            transform: translateY(1px);
        }

        /* 音频播放器隐藏 */
        #audioPlayer {
            display: none;
        }

        /* 进度条样式 */
        .progress-bar {
            position: absolute;
            /* 将进度条设置为绝对定位 */
            top: 50%;
            /* 将进度条的顶部边缘定位到父元素的垂直中心 */
            left: 0;
            /* 将进度条的左侧边缘定位到父元素的水平中心 */
            transform: translate(0%,-50%);
            /* 将进度条向上移动自身宽度和高度的一半，实现居中 */
            height: 100%;
            /* 设置进度条的高度，可根据需要调整 */
            background-color: #e91e63;
            /* 将进度条的背景颜色设置为白色 */
            width: 0;
            /* 初始宽度为 0，随着进度变化而增加 */
            transition: width 0.1s ease;
            /* 设置宽度变化的过渡效果，持续时间为 0.1 秒，过渡曲线为 ease */
            background-color: rgba(233, 30, 99, 0.5);
            /* 使用半透明白色背景色，rgba 最后一个参数为透明度，范围 0 - 1 */
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="header-content">
            <div>
                <a href="index.html" class="nav-link">首页</a>
                <a href="About.html" class="nav-link">关于</a>
                <a href="LiveHistory.html" class="nav-link">往期回放</a>
            </div>
            <div>
                <a href="https://space.bilibili.com/12136555" target="_blank" class="bilibili-btn">个人主页</a>
                <a href="https://live.bilibili.com/8414339" target="_blank" class="bilibili-btn">进入直播间</a>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="banner">
            <h1>🎤御坂19039语音按钮🎤</h1>
            <div class="dynamic-item">
                <p>点击按钮即可播放御坂的经典语录哦～(≧▽≦)/~</p>
            </div>
        </div>

        <!-- 欢迎词分组 -->
        <div class="category-box">
            <!-- 这是一个分组 -->
            <h2 class="category-title">🎀 欢迎用语</h2>
            <div class="button-grid">
                <!-- 这是一行按钮，多行复制这个 -->
                <div class="sound-btn purple-btn" onclick="playSound('goodnight_O.mp3', this)">
                    晚上好
                    <div class="progress-bar"></div>
                </div>
                <div class="sound-btn purple-btn" onclick="playSound('MoShiMoShi.mp3', this)">
                    莫西莫西（电流音）
                    <div class="progress-bar"></div>
                </div>
                <div class="sound-btn purple-btn" onclick="playSound('thank_O.mp3', this)">
                    谢谢
                    <div class="progress-bar"></div>
                </div>
            </div>
            <div class="button-grid">
                <div class="sound-btn" onclick="playSound('Hi_Y_JP.mp3', this)">
                    大家（日语）
                    <div class="progress-bar"></div>
                </div>
                <div class="sound-btn" onclick="playSound('Night_Y_JP.mp3', this)">
                    晚安（日语）
                    <div class="progress-bar"></div>
                </div>
                <div class="sound-btn" onclick="playSound('Thank_Y_JP.mp3', this)">
                    谢谢（日语）
                    <div class="progress-bar"></div>
                </div>
            </div>
        </div>

        <!-- 口头禅分组 -->
        <div class="category-box">
            <h2 class="category-title">🌸 经典口头禅</h2>
            <div class="button-grid">
                <div class="sound-btn purple-btn" onclick="playSound('HoMuHoMu_O.mp3', this)">
                    是这样子的喵～
                    <div class="progress-bar"></div>
                </div>
                <div class="sound-btn purple-btn" onclick="playSound('HanXiao_O.mp3', this)">
                    哈哈哈～
                    <div class="progress-bar"></div>
                </div>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <!-- 页脚 -->
    <div style="text-align: center; padding: 30px; color: #666;">
        <p>© 2024 御坂19039 应援站 | 粉丝群：769271000</p>
        <p>本站为粉丝自制，与哔哩哔哩官方无关</p>
    </div>

<script>
    let currentButton = null;
    const audio = document.getElementById('audioPlayer');

    // 全局监听音频时间更新事件
    audio.addEventListener('timeupdate', function() {
        if (currentButton && !audio.paused) {
            const progress = (audio.currentTime / audio.duration) * 100;
            currentButton.querySelector('.progress-bar').style.width = progress + '%';
        }
    });

    // 全局监听音频结束事件
    audio.addEventListener('ended', function() {
        if (currentButton) {
            currentButton.querySelector('.progress-bar').style.width = '0%';
            currentButton = null;
        }
    });

    function playSound(soundFile, button) {
        // 重置上一个按钮的进度条宽度
        if (currentButton) {
            currentButton.querySelector('.progress-bar').style.width = '0%';
        }

        // 暂停当前音频并重置时间以触发进度条重置
        audio.pause();
        audio.currentTime = 0;
        
        // 设置新音频源并播放
        audio.src = 'sounds/' + soundFile;
        audio.play();

        // 更新当前活动按钮
        currentButton = button;

        // 添加点击动画效果
        button.style.transform = 'scale(0.95)';
        setTimeout(() => {
            button.style.transform = '';
        }, 200);
    }

    // 预加载所有音频文件（保持原样）
    window.addEventListener('load', () => {
        const buttons = document.querySelectorAll('.sound-btn');
        const loadedFiles = new Set();

        buttons.forEach(button => {
            const onclickContent = button.getAttribute('onclick');
            const match = onclickContent.match(/playSound\('(.*?)'\)/);
            if (match && match[1]) {
                const filename = 'sounds/' + match[1];
                if (!loadedFiles.has(filename)) {
                    new Audio(filename);
                    loadedFiles.add(filename);
                }
            }
        });
    });
</script>
</body>

</html>